"use strict";(self.webpackChunkinstagram_clone2=self.webpackChunkinstagram_clone2||[]).push([[458],{458:function(e,r,t){t.r(r);var n=t(861),a=t(885),u=t(757),s=t.n(u),o=t(791),c=t(271),i=t(523),l=t(303),d=t(155),f=t(606),p=t(184);r.default=function(){var e=(0,c.k6)(),r=(0,o.useContext)(l.Z).firebase,t=(0,o.useState)(""),u=(0,a.Z)(t,2),m=u[0],x=u[1],h=(0,o.useState)(""),w=(0,a.Z)(h,2),v=w[0],b=w[1],y=(0,o.useState)(""),g=(0,a.Z)(y,2),Z=g[0],k=g[1],j=(0,o.useState)(""),I=(0,a.Z)(j,2),N=I[0],C=I[1],S=(0,o.useState)(""),P=(0,a.Z)(S,2),U=P[0],E=P[1],G=""===m||""===v,L=function(){var t=(0,n.Z)(s().mark((function t(n){var a,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,(0,f.$K)(Z);case 3:if(a=t.sent,console.log(a),a.length){t.next=25;break}return t.prev=6,t.next=9,r.auth().createUserWithEmailAndPassword(m,v);case 9:return u=t.sent,t.next=12,u.user.updateProfile({displayName:Z});case 12:return t.next=14,r.firestore().collection("users").add({userId:u.user.uid,username:Z.toLowerCase(),fullName:N,emailAddress:m.toLowerCase(),following:[],followers:[],dateCreated:Date.now()});case 14:e.push(d.h1),t.next=23;break;case 17:t.prev=17,t.t0=t.catch(6),C(""),x(""),b(""),E(t.t0.message);case 23:t.next=27;break;case 25:k(""),E("That username is already taken, please try another.");case 27:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){document.title="Sign Up - Instagram"}),[]),(0,p.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center h-screen",children:[(0,p.jsx)("div",{className:"flex w-3/5",children:(0,p.jsx)("img",{src:"/images/iphone-with-profile.jpg",alt:"iPhone with Instagram app"})}),(0,p.jsxs)("div",{className:"flex flex-col w-2/5",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 border border-gray-primary mb-4 rounded",children:[(0,p.jsx)("h1",{className:"flex justify-center w-full",children:(0,p.jsx)("img",{src:"images/logo.png",alt:"Instagram",className:"mt-2 w-6/12 mb-4"})}),U&&(0,p.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:U}),(0,p.jsxs)("form",{onSubmit:L,method:"POST",children:[(0,p.jsx)("input",{"aria-label":"Enter your username",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return k(r.value)},value:Z}),(0,p.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return C(r.value)},value:N}),(0,p.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return x(r.value)},value:m}),(0,p.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2",onChange:function(e){var r=e.target;return b(r.value)},value:v}),(0,p.jsx)("button",{disabled:G,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold \n            ".concat(G&&"opacity-50"),children:"Sign Up"})]})]}),(0,p.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 rounded border border-gray-primary",children:(0,p.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,p.jsx)(i.rU,{to:d.ym,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}},606:function(e,r,t){t.d(r,{$K:function(){return i},dQ:function(){return l},xD:function(){return d},ve:function(){return f},NS:function(){return p},T6:function(){return m},wP:function(){return x},_T:function(){return h},IU:function(){return w},Gm:function(){return v}});var n=t(885),a=t(683),u=t(861),s=t(757),o=t.n(s),c=t(802),i=function(){var e=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return e.data().length>0})));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,u.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(){var e=(0,u.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("userId","==",r).get();case 2:return t=e.sent,n=t.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)(o().mark((function e(r,t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").limit(10).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==r&&!t.includes(e.userId)})));case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),p=function(){var e=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.w.firestore().collection("users").doc(r).update({following:n?c.G.arrayRemove(t):c.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.Z)(o().mark((function e(r,t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.w.firestore().collection("users").doc(r).update({followers:n?c.G.arrayRemove(t):c.G.arrayUnion(t)}));case 1:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),x=function(){var e=(0,u.Z)(o().mark((function e(r,t){var n,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("photos").where("userId","in",t).get();case 2:return n=e.sent,s=n.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(s.map(function(){var e=(0,u.Z)(o().mark((function e(t){var n,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t.likes.includes(r)&&(n=!0),e.next=4,d(t.userId);case 4:return u=e.sent,s=u[0].username,e.abrupt("return",(0,a.Z)((0,a.Z)({username:s},t),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),h=function(){var e=(0,u.Z)(o().mark((function e(r){var t,u,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return t=e.sent,u=(0,n.Z)(t,1),s=u[0],e.next=7,c.w.firestore().collection("photos").where("userId","==",s.userId).get();case 7:return i=e.sent,e.abrupt("return",i.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.Z)(o().mark((function e(r,t){var u,s,i,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.w.firestore().collection("users").where("username","==",r).where("following","array-contains",t).get();case 2:return u=e.sent,s=u.docs.map((function(e){return(0,a.Z)((0,a.Z)({},e.data()),{},{docId:e.id})})),i=(0,n.Z)(s,1),l=i[0],d=void 0===l?{}:l,e.abrupt("return",d.userId);case 5:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.Z)(o().mark((function e(r,t,n,a,u){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,a,r);case 2:return e.next=4,m(n,u,r);case 4:case"end":return e.stop()}}),e)})));return function(r,t,n,a,u){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=458.ddcd8dab.chunk.js.map